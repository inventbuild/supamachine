stateDiagram-v2
    [*] --> START

    START --> CHECKING_SESSION :   START  
    CHECKING_SESSION --> SIGNED_OUT :   AUTH_CHANGED [no session]  
    CHECKING_SESSION --> CONTEXT_LOADING :   AUTH_CHANGED [session]  
    CHECKING_SESSION --> ERROR_CHECKING_SESSION :   ERROR_CHECKING_SESSION  
    SIGNED_OUT --> AUTHENTICATING :   AUTH_INITIATED  
    SIGNED_OUT --> CONTEXT_LOADING :   AUTH_CHANGED [session]  
    AUTHENTICATING --> SIGNED_OUT :   AUTH_CHANGED [no session] / AUTH_CANCELLED  
    AUTHENTICATING --> CONTEXT_LOADING :   AUTH_CHANGED [session]  
    CONTEXT_LOADING --> SIGNED_OUT :   AUTH_CHANGED [no session]  
    CONTEXT_LOADING --> CONTEXT_LOADING :   AUTH_CHANGED [session]  
    CONTEXT_LOADING --> INITIALIZING :   CONTEXT_RESOLVED  
    CONTEXT_LOADING --> ERROR_CONTEXT :   ERROR_CONTEXT  
    INITIALIZING --> SIGNED_OUT :   AUTH_CHANGED [no session]  
    INITIALIZING --> CONTEXT_LOADING :   AUTH_CHANGED [session]  
    INITIALIZING --> AUTH_READY :   INITIALIZED  
    INITIALIZING --> ERROR_INITIALIZING :   ERROR_INITIALIZING  
    AUTH_READY --> SIGNED_OUT :   AUTH_CHANGED [no session]  
    AUTH_READY --> AUTHENTICATING :   AUTH_INITIATED  
    AUTH_READY --> CONTEXT_LOADING :   AUTH_CHANGED [session]  
    ERROR_CHECKING_SESSION --> SIGNED_OUT :   AUTH_CHANGED [no session]  
    ERROR_CHECKING_SESSION --> AUTHENTICATING :   AUTH_INITIATED  
    ERROR_CHECKING_SESSION --> CONTEXT_LOADING :   AUTH_CHANGED [session]  
    ERROR_CONTEXT --> SIGNED_OUT :   AUTH_CHANGED [no session]  
    ERROR_CONTEXT --> CONTEXT_LOADING :   AUTH_CHANGED [session]  
    ERROR_INITIALIZING --> SIGNED_OUT :   AUTH_CHANGED [no session]  
    ERROR_INITIALIZING --> CONTEXT_LOADING :   AUTH_CHANGED [session]  

    classDef entry fill:#e1bee7,stroke:#6a1b9a,color:#000,padding:12px
    classDef ready fill:#c8e6c9,stroke:#2e7d32,color:#000,padding:12px
    classDef signedOut fill:#bbdefb,stroke:#1565c0,color:#000,padding:12px
    classDef loading fill:#fff9c4,stroke:#f9a825,color:#000,padding:12px
    classDef error fill:#ffcdd2,stroke:#c62828,color:#000,padding:12px
    class START entry
    class AUTH_READY ready
    class SIGNED_OUT signedOut
    class CHECKING_SESSION,AUTHENTICATING,CONTEXT_LOADING,INITIALIZING loading
    class ERROR_CHECKING_SESSION,ERROR_CONTEXT,ERROR_INITIALIZING error
